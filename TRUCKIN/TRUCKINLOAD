(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)

(FILECREATED " 7-Jul-2022 21:58:26" {DSK}<Users>larry>loops>truckin>TRUCKINLOAD.;3 3920   

      :CHANGES-TO (FNS LoadTruckin)
                  (VARS TRUCKINLOADCOMS)

      :PREVIOUS-DATE " 6-Jul-2022 14:40:36" {DSK}<Users>larry>loops>truckin>TRUCKINLOAD.;1)


(* ; "
Copyright (c) 1987-1988, 1991 by Xerox Corporation.
")

(PRETTYCOMPRINT TRUCKINLOADCOMS)

(RPAQQ TRUCKINLOADCOMS
       (
        (* ;; "Random patches to make Truckin work")

        (VARS [TruckinDirectory (OR (MEDLEYDIR "../loops/truckin" NIL NIL T)
                                    (LET [(POSSOURCES (OR (STRPOS "SOURCES>" LOOPSDIRECTORY NIL NIL T
                                                                 NIL UPPERCASEARRAY T)
                                                          (STRPOS "SYSTEM>" LOOPSDIRECTORY NIL NIL T
                                                                 NIL UPPERCASEARRAY T]
                                         (IF POSSOURCES THEN (MKATOM (CONCAT (SUBSTRING 
                                                                                    LOOPSDIRECTORY 1
                                                                                    (SUB1 POSSOURCES)
                                                                                    )
                                                                            "truckin>"))
                                             ELSE LOOPSDIRECTORY]
              (TruckinPlayersDirectory (CONCAT TruckinDirectory "players>")))
        (FUNCTIONS INMENU)
        (P (MOVD? 'PROMPTPRINT 'PROMPT)
           (MOVD? 'DISMISS 'WAITMS)
           (MOVD? 'RS.INTTY 'INTTY))
        (FNS LoadTruckin)))



(* ;; "Random patches to make Truckin work")


(RPAQ TruckinDirectory
      (OR (MEDLEYDIR "../loops/truckin" NIL NIL T)
          (LET [(POSSOURCES (OR (STRPOS "SOURCES>" LOOPSDIRECTORY NIL NIL T NIL UPPERCASEARRAY T)
                                (STRPOS "SYSTEM>" LOOPSDIRECTORY NIL NIL T NIL UPPERCASEARRAY T]
               (IF POSSOURCES THEN (MKATOM (CONCAT (SUBSTRING LOOPSDIRECTORY 1 (SUB1 POSSOURCES))
                                                  "truckin>"))
                   ELSE LOOPSDIRECTORY))))

(RPAQ TruckinPlayersDirectory (CONCAT TruckinDirectory "players>"))

(CL:DEFUN INMENU (TITLE ITEMS &OPTIONAL (PROMPTSTRING "Choose one")
                        FLG)
   (MENU (create MENU
                TITLE _ TITLE
                ITEMS _ ITEMS)))

(MOVD? 'PROMPTPRINT 'PROMPT)

(MOVD? 'DISMISS 'WAITMS)

(MOVD? 'RS.INTTY 'INTTY)
(DEFINEQ

(LoadTruckin
  [LAMBDA NIL                                                (* ; "Edited  7-Jul-2022 21:52 by lmm")
                                                             (* ; "Edited 18-Jul-88 20:01 by Bane")
    (CL:UNLESS (GETD 'LOADLOOPS)
           (CL:ERROR "Please load LOOPS so I can find everything else"))

    (* ;; "Then the gauges")

    (CL:UNLESS (GETD 'LOADGAUGES)
        (FILESLOAD (FROM VALUEOF LOOPSLIBRARYDIRECTORY)
               GAUGELOADER)
        (LOADGAUGES))

    (* ;; "Then the rules")

    (FILESLOAD (FROM VALUEOF LOOPSUSERSRULESDIRECTORY)
           RULES-ROOT)

    (* ;; "Finally load Truckin")

    (CNDIR TruckinDirectory)
    (FILESLOAD (FROM VALUEOF TruckinDirectory)
           TRUCKIN TRUCKINR TRUCKINDB TRUCKINP TRUCKINI LOOPSGATEWAY TRUCKINM TRUCKINV)
    (InitializeTruckin)
    (AND (CL:Y-OR-N-P "Shall I load all the players?")
         (FILESLOAD (FROM VALUEOF TruckinPlayersDirectory)
                TRAVELER PEDDLER PLANNER BADAPPLES HIGHROLLER HOUSEPLAYER TEAMSTER))
    "Load any other players, then say
(_ ($ Truckin) New)
(_ PlayerInterface BeginGame)
 to start."])
)
(PUTPROPS TRUCKINLOAD COPYRIGHT ("Xerox Corporation" 1987 1988 1991))
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (2372 2561 (INMENU 2372 . 2561)) (2644 3827 (LoadTruckin 2654 . 3825)))))
STOP
