(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)

(FILECREATED "16-Oct-2022 12:06:03" {DSK}<home>larry>loops>truckin>TRUCKINLOAD.;7 3915   

      :CHANGES-TO (FNS LoadTruckin)

      :PREVIOUS-DATE "12-Oct-2022 19:59:54" {DSK}<home>larry>loops>truckin>TRUCKINLOAD.;6)


(* ; "
Copyright (c) 1987-1988, 1991, 2022 by Xerox Corporation.
")

(PRETTYCOMPRINT TRUCKINLOADCOMS)

(RPAQQ TRUCKINLOADCOMS
       (
        (* ;; "Random patches to make Truckin work")

        (VARS [TruckinDirectory (OR (LET [(POSSOURCES (OR (STRPOS "SOURCES>" LOOPSDIRECTORY NIL NIL T
                                                                 NIL UPPERCASEARRAY T)
                                                          (STRPOS "SYSTEM>" LOOPSDIRECTORY NIL NIL T
                                                                 NIL UPPERCASEARRAY T]
                                         (IF POSSOURCES THEN (MKATOM (CONCAT (SUBSTRING 
                                                                                    LOOPSDIRECTORY 1
                                                                                    (SUB1 POSSOURCES)
                                                                                    )
                                                                            "truckin>"))
                                             ELSE LOOPSDIRECTORY]
              (TruckinPlayersDirectory (CONCAT TruckinDirectory "players>")))
        (FUNCTIONS INMENU)
        (P (MOVD? 'PROMPTPRINT 'PROMPT)
           (MOVD? 'DISMISS 'WAITMS)
           (MOVD? 'RS.INTTY 'INTTY))
        (FNS LoadTruckin)))



(* ;; "Random patches to make Truckin work")


(RPAQ TruckinDirectory
      (OR (LET [(POSSOURCES (OR (STRPOS "SOURCES>" LOOPSDIRECTORY NIL NIL T NIL UPPERCASEARRAY T)
                                (STRPOS "SYSTEM>" LOOPSDIRECTORY NIL NIL T NIL UPPERCASEARRAY T]
               (IF POSSOURCES THEN (MKATOM (CONCAT (SUBSTRING LOOPSDIRECTORY 1 (SUB1 POSSOURCES))
                                                  "truckin>"))
                   ELSE LOOPSDIRECTORY))))

(RPAQ TruckinPlayersDirectory (CONCAT TruckinDirectory "players>"))

(CL:DEFUN INMENU (TITLE ITEMS &OPTIONAL (PROMPTSTRING "Choose one")
                        FLG)
   (MENU (create MENU
                TITLE _ TITLE
                ITEMS _ ITEMS)))

(MOVD? 'PROMPTPRINT 'PROMPT)

(MOVD? 'DISMISS 'WAITMS)

(MOVD? 'RS.INTTY 'INTTY)
(DEFINEQ

(LoadTruckin
  [LAMBDA NIL                                                (* ; "Edited 16-Oct-2022 12:03 by lmm")
                                                             (* ; "Edited 12-Oct-2022 19:58 by lmm")
                                                             (* ; "Edited  7-Jul-2022 21:52 by lmm")
                                                             (* ; "Edited 18-Jul-88 20:01 by Bane")
    (CL:UNLESS (GETD 'LOADLOOPS)
           (CL:ERROR "Please load LOOPS so I can find everything else"))

    (* ;; "Then the gauges")

    (CL:UNLESS (GETD 'LOADGAUGES)
        (FILESLOAD (FROM LOOPSLIBRARY)
               GAUGELOADER)
        (LOADGAUGES))

    (* ;; "Then the rules")

    (FILESLOAD (FROM LOOPSUSERSRULES)
           RULES-ROOT)

    (* ;; "Finally load Truckin")

    (FILESLOAD (FROM VALUEOF TruckinDirectory)
           TRUCKIN TRUCKINR TRUCKINDB TRUCKINP TRUCKINI LOOPSGATEWAY TRUCKINM TRUCKINV)
    (AND (CL:Y-OR-N-P "Shall I load all the players?")
         (FILESLOAD (FROM VALUEOF TruckinPlayersDirectory)
                TRAVELER PEDDLER PLANNER BADAPPLES HIGHROLLER HOUSEPLAYER TEAMSTER))
    (InitializeTruckin)
    "Load any other players, then say
(_ ($ Truckin) New)
(_ PlayerInterface BeginGame)
 to start."])
)
(PUTPROPS TRUCKINLOAD COPYRIGHT ("Xerox Corporation" 1987 1988 1991 2022))
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (2207 2396 (INMENU 2207 . 2396)) (2479 3817 (LoadTruckin 2489 . 3815)))))
STOP
